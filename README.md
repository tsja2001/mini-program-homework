# 第二次作业(学习通作业要求)

## 实验内容：用户注册小程序

### 一、实验目的

1. 掌握 WEUI 的使用；
2. 掌握 form 表单提交的方法；
3. 掌握页面导航与参数传递；
4. 掌握条件渲染。

### 二、实验内容和要求

设计一个小程序，有三个页面：用户注册信息登录页面，显示用户注册信息页面和信息编辑页面。小程序的具体要求如下：

1.        进入小程序显示用户注册信息输入页面，需要输入的信息包括：用户头像、姓名、性别、手机号码、入学年月日、学校、学院、专业。参考教材P91，3.3.2节。用户点击【提交】按钮，进入到注册信息显示界面。
2.       在显示页面中显示用户的注册信息。用户单击某项时，进入编辑页面，对该项信息进行修改，修改后返回显示页面。
3.        编辑页面，根据用户要编辑的项，显示不同的界面，修改后保存返回显示页面，页面显示修改后的值。
    参考教材第 3 章和第 4 章的内容。界面采用 WEUI 实现，要求界面布局合理，操作友好。

### 三、思考题

1. 说明页面传值的方式有哪些？
   1. url 传值
   2. storage
   3. 第三方状态管理器: redux(发布-订阅模式), zustand....
   4. 手写状态管理(此项目主要采用此方法)
2. 列举实验过程中遇到问题及其解决方案。

	**状态管理不好实现(要解决多页面数据共享问题)**

	1. 问题: 注册、显示、修改三个页面均需要显示注册数据, 有修改和显示数据的需求, 需要一个位置存放这些数据.
	2. 解决方法: 在 App.js 中引入了一个简化的状态管理器
		* 通过get和set获取和修改数据
		* 通过observe传入监听函数, 此后执行set操作时, 回掉这些监听函数
	3. 解决问题: 注册、显示、修改三个页面跳转时, 无需携带数据, 均通过`getApp()`获取store实例即可.
```js
class Store {
  constructor(initData) {
    // 全局state
    this.state = {
      ...initData,
    };
    // 监听store的回掉函数集合
    this.callbackSet = new Set();
  }
  set(key, value) {
    this.state = {
      ...this.state,
      [key]: value,
    };
    this.callbackSet.forEach((cb) => cb(this.state));
  }
  get(key) {
    return this.state[key];
  }
  observe(cb) {
    cb(this.state);
    this.callbackSet.add(cb);
    return () => {
      this.callbackSet.delete(cb);
    };
  }
}
```
